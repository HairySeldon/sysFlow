{"ast":null,"code":"var _jsxFileName = \"/home/belac/sysFlow/src/components/GraphEdgeLayer.tsx\";\nimport React from \"react\";\nimport * as GraphLogic from \"../utils/GraphLogic\";\n// 1. Define the shape of a Container so TypeScript knows it has position/size/id\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const GraphEdgeLayer = ({\n  graph,\n  mode,\n  creatingEdge\n}) => {\n  const getVisualPosition = entityId => {\n    // 1. If visible, return position\n    if (GraphLogic.isEntityVisible(graph, entityId)) {\n      const node = graph.nodesById[entityId];\n      const container = graph.containersById[entityId];\n      return (node === null || node === void 0 ? void 0 : node.position) || (container === null || container === void 0 ? void 0 : container.position) || null;\n    }\n\n    // 2. Find parent\n    // FIX: Explicitly cast the finding to the Container type\n    const containers = Object.values(graph.containersById);\n    const parent = containers.find(c => {\n      var _c$childContainerIds;\n      return c.nodeIds.includes(entityId) || ((_c$childContainerIds = c.childContainerIds) === null || _c$childContainerIds === void 0 ? void 0 : _c$childContainerIds.includes(entityId));\n    });\n\n    // FIX: Now TypeScript knows 'parent' has .id, .position, and .size\n    if (parent && GraphLogic.isEntityVisible(graph, parent.id)) {\n      return {\n        x: parent.position.x + parent.size.width / 2,\n        y: parent.position.y + parent.size.height / 2\n      };\n    }\n    return null;\n  };\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    style: {\n      position: \"absolute\",\n      top: 0,\n      left: 0,\n      width: \"100%\",\n      height: \"100%\",\n      pointerEvents: \"none\",\n      overflow: \"visible\",\n      zIndex: 0\n    },\n    children: [Object.values(graph.edgesById).map(edge => {\n      const start = getVisualPosition(edge.sourceNodeId);\n      const end = getVisualPosition(edge.targetNodeId);\n      if (!start || !end) return null;\n      return /*#__PURE__*/_jsxDEV(\"line\", {\n        x1: start.x + (graph.nodesById[edge.sourceNodeId] ? 50 : 0),\n        y1: start.y + (graph.nodesById[edge.sourceNodeId] ? 25 : 0),\n        x2: end.x + (graph.nodesById[edge.targetNodeId] ? 50 : 0),\n        y2: end.y + (graph.nodesById[edge.targetNodeId] ? 25 : 0),\n        stroke: \"black\",\n        strokeWidth: \"2\"\n      }, edge.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 11\n      }, this);\n    }), mode === \"edge-create\" && creatingEdge && /*#__PURE__*/_jsxDEV(\"line\", {\n      x1: creatingEdge.position.x,\n      y1: creatingEdge.position.y,\n      x2: (() => {\n        const n = graph.nodesById[creatingEdge.sourceNodeId];\n        return n ? n.position.x + 50 : 0;\n      })(),\n      y2: (() => {\n        const n = graph.nodesById[creatingEdge.sourceNodeId];\n        return n ? n.position.y + 25 : 0;\n      })(),\n      stroke: \"black\",\n      strokeWidth: \"2\",\n      strokeDasharray: \"5,5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n};\n_c = GraphEdgeLayer;\nvar _c;\n$RefreshReg$(_c, \"GraphEdgeLayer\");","map":{"version":3,"names":["React","GraphLogic","jsxDEV","_jsxDEV","GraphEdgeLayer","graph","mode","creatingEdge","getVisualPosition","entityId","isEntityVisible","node","nodesById","container","containersById","position","containers","Object","values","parent","find","c","_c$childContainerIds","nodeIds","includes","childContainerIds","id","x","size","width","y","height","style","top","left","pointerEvents","overflow","zIndex","children","edgesById","map","edge","start","sourceNodeId","end","targetNodeId","x1","y1","x2","y2","stroke","strokeWidth","fileName","_jsxFileName","lineNumber","columnNumber","n","strokeDasharray","_c","$RefreshReg$"],"sources":["/home/belac/sysFlow/src/components/GraphEdgeLayer.tsx"],"sourcesContent":["import React from \"react\";\nimport { Vec2 } from \"../models/Entity\";\nimport  * as GraphLogic from \"../utils/GraphLogic\";\n// 1. Define the shape of a Container so TypeScript knows it has position/size/id\ninterface Container {\n  id: string;\n  position: Vec2;\n  size: { width: number; height: number };\n  nodeIds: string[];\n  childContainerIds?: string[];\n}\n\ninterface GraphEdgeLayerProps {\n  graph: any; \n  mode: string;\n  creatingEdge: { sourceNodeId: string; position: Vec2 } | null;\n}\n\nexport const GraphEdgeLayer: React.FC<GraphEdgeLayerProps> = ({\n  graph,\n  mode,\n  creatingEdge,\n}) => {\n  \n  const getVisualPosition = (entityId: string): Vec2 | null => {\n    // 1. If visible, return position\n    if (GraphLogic.isEntityVisible(graph, entityId)) {\n      const node = graph.nodesById[entityId];\n      const container = graph.containersById[entityId];\n      return node?.position || container?.position || null;\n    }\n\n    // 2. Find parent\n    // FIX: Explicitly cast the finding to the Container type\n    const containers: Container[] = Object.values(graph.containersById);\n    \n    const parent = containers.find((c) =>\n        c.nodeIds.includes(entityId) || c.childContainerIds?.includes(entityId)\n    );\n\n    // FIX: Now TypeScript knows 'parent' has .id, .position, and .size\n    if (parent && GraphLogic.isEntityVisible(graph, parent.id)) {\n      return {\n        x: parent.position.x + parent.size.width / 2,\n        y: parent.position.y + parent.size.height / 2,\n      };\n    }\n\n    return null;\n  };\n\n  return (\n    <svg\n      style={{\n        position: \"absolute\",\n        top: 0,\n        left: 0,\n        width: \"100%\",\n        height: \"100%\",\n        pointerEvents: \"none\",\n        overflow: \"visible\",\n        zIndex: 0, \n      }}\n    >\n      {/* 1. Render Existing Edges */}\n      {Object.values(graph.edgesById).map((edge: any) => {\n        const start = getVisualPosition(edge.sourceNodeId);\n        const end = getVisualPosition(edge.targetNodeId);\n\n        if (!start || !end) return null; \n\n        return (\n          <line\n            key={edge.id}\n            x1={start.x + (graph.nodesById[edge.sourceNodeId] ? 50 : 0)}\n            y1={start.y + (graph.nodesById[edge.sourceNodeId] ? 25 : 0)}\n            x2={end.x + (graph.nodesById[edge.targetNodeId] ? 50 : 0)}\n            y2={end.y + (graph.nodesById[edge.targetNodeId] ? 25 : 0)}\n            stroke=\"black\"\n            strokeWidth=\"2\"\n          />\n        );\n      })}\n\n      {/* 2. Render Temporary \"Creating\" Edge */}\n      {mode === \"edge-create\" && creatingEdge && (\n        <line\n          x1={creatingEdge.position.x} \n          y1={creatingEdge.position.y}\n          x2={(() => {\n            const n = graph.nodesById[creatingEdge.sourceNodeId];\n            return n ? n.position.x + 50 : 0;\n          })()}\n          y2={(() => {\n            const n = graph.nodesById[creatingEdge.sourceNodeId];\n            return n ? n.position.y + 25 : 0;\n          })()}\n          stroke=\"black\"\n          strokeWidth=\"2\"\n          strokeDasharray=\"5,5\"\n        />\n      )}\n    </svg>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}