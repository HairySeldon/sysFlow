{"ast":null,"code":"var _jsxFileName = \"/home/belac/sysFlow/src/components/GraphContextMenu.tsx\";\nimport React from \"react\";\n// Adjust these imports to match where your types/classes are located\nimport { ContextMenu } from \"./ContextMenu\"; // Assuming this is your UI component\n// import { Graph } from \"./Graph\"; // If you have a specific type for Graph\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const GraphContextMenu = ({\n  canvasMenu,\n  graph,\n  onGraphChange,\n  onClose,\n  onStartRename,\n  onToggleContainer\n}) => {\n  if (!canvasMenu) return null;\n\n  // --- Logic to Generate Menu Options ---\n  const getOptions = () => {\n    // 1. CANVAS (Background) -> Add Items\n    if (!canvasMenu.targetId) {\n      return [{\n        label: \"Add Node\",\n        onClick: () => {\n          const newGraph = graph.clone();\n          const id = `n_${crypto.randomUUID().slice(0, 4)}`;\n          newGraph.addNode({\n            id,\n            label: \"New Node\",\n            position: canvasMenu.position,\n            ports: [],\n            size: {\n              width: 100,\n              height: 50\n            }\n          });\n          onGraphChange(newGraph);\n          onClose();\n        }\n      }, {\n        label: \"Add Container\",\n        onClick: () => {\n          const newGraph = graph.clone();\n          const id = `c_${crypto.randomUUID().slice(0, 4)}`;\n          newGraph.addContainer({\n            id,\n            label: \"New Container\",\n            position: canvasMenu.position,\n            size: {\n              width: 300,\n              height: 200\n            },\n            nodeIds: [],\n            childContainerIds: [],\n            collapsed: false\n          });\n          onGraphChange(newGraph);\n          onClose();\n        }\n      }];\n    }\n\n    // 2. NODE Actions\n    if (canvasMenu.type === \"node\") {\n      return [{\n        label: \"Rename\",\n        onClick: () => {\n          onStartRename(canvasMenu.targetId, canvasMenu.position);\n          onClose();\n        }\n      }, {\n        label: \"Delete Node\",\n        onClick: () => {\n          if (canvasMenu.targetId) {\n            const newGraph = graph.clone();\n            newGraph.removeNode(canvasMenu.targetId);\n            onGraphChange(newGraph);\n          }\n          onClose();\n        }\n      }];\n    }\n\n    // 3. CONTAINER Actions\n    if (canvasMenu.type === \"container\") {\n      return [{\n        label: \"Rename\",\n        onClick: () => {\n          onStartRename(canvasMenu.targetId, canvasMenu.position);\n          onClose();\n        }\n      }, {\n        label: \"Toggle Collapse\",\n        onClick: () => {\n          if (canvasMenu.targetId) {\n            onToggleContainer(canvasMenu.targetId);\n          }\n          onClose();\n        }\n      }, {\n        label: \"Delete Container\",\n        onClick: () => {\n          if (canvasMenu.targetId) {\n            const newGraph = graph.clone();\n            newGraph.removeContainer(canvasMenu.targetId);\n            onGraphChange(newGraph);\n          }\n          onClose();\n        }\n      }];\n    }\n    return [];\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"fixed\",\n        top: 0,\n        left: 0,\n        width: \"100vw\",\n        height: \"100vh\",\n        zIndex: 9998 // High Z-Index but below the menu\n      },\n      onMouseDown: e => {\n        e.stopPropagation();\n        onClose();\n      },\n      onContextMenu: e => {\n        e.preventDefault();\n        e.stopPropagation();\n        onClose();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        top: canvasMenu.position.y,\n        left: canvasMenu.position.x,\n        zIndex: 9999 // Highest Z-Index\n      },\n      children: /*#__PURE__*/_jsxDEV(ContextMenu, {\n        position: canvasMenu.position,\n        options: getOptions()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_c = GraphContextMenu;\nvar _c;\n$RefreshReg$(_c, \"GraphContextMenu\");","map":{"version":3,"names":["React","ContextMenu","jsxDEV","_jsxDEV","Fragment","_Fragment","GraphContextMenu","canvasMenu","graph","onGraphChange","onClose","onStartRename","onToggleContainer","getOptions","targetId","label","onClick","newGraph","clone","id","crypto","randomUUID","slice","addNode","position","ports","size","width","height","addContainer","nodeIds","childContainerIds","collapsed","type","removeNode","removeContainer","children","style","top","left","zIndex","onMouseDown","e","stopPropagation","onContextMenu","preventDefault","fileName","_jsxFileName","lineNumber","columnNumber","y","x","options","_c","$RefreshReg$"],"sources":["/home/belac/sysFlow/src/components/GraphContextMenu.tsx"],"sourcesContent":["import React from \"react\";\n// Adjust these imports to match where your types/classes are located\nimport { ContextMenu } from \"./ContextMenu\"; // Assuming this is your UI component\n// import { Graph } from \"./Graph\"; // If you have a specific type for Graph\n\ninterface CanvasMenuState {\n  targetId: string | null;\n  type: \"canvas\" | \"node\" | \"container\";\n  position: { x: number; y: number };\n}\n\ninterface GraphContextMenuProps {\n  canvasMenu: CanvasMenuState | null;\n  graph: any; // Replace 'any' with your actual Graph class type if available\n  onGraphChange: (newGraph: any) => void;\n  onClose: () => void;\n  \n  // Actions that require parent state\n  onStartRename: (id: string | null, position: { x: number; y: number }) => void;\n  onToggleContainer: (id: string) => void;\n}\n\nexport const GraphContextMenu: React.FC<GraphContextMenuProps> = ({\n  canvasMenu,\n  graph,\n  onGraphChange,\n  onClose,\n  onStartRename,\n  onToggleContainer,\n}) => {\n  if (!canvasMenu) return null;\n\n  // --- Logic to Generate Menu Options ---\n  const getOptions = () => {\n    // 1. CANVAS (Background) -> Add Items\n    if (!canvasMenu.targetId) {\n      return [\n        {\n          label: \"Add Node\",\n          onClick: () => {\n            const newGraph = graph.clone();\n            const id = `n_${crypto.randomUUID().slice(0, 4)}`;\n            newGraph.addNode({\n              id,\n              label: \"New Node\",\n              position: canvasMenu.position,\n              ports: [],\n              size: { width: 100, height: 50 },\n            });\n            onGraphChange(newGraph);\n            onClose();\n          },\n        },\n        {\n          label: \"Add Container\",\n          onClick: () => {\n            const newGraph = graph.clone();\n            const id = `c_${crypto.randomUUID().slice(0, 4)}`;\n            newGraph.addContainer({\n              id,\n              label: \"New Container\",\n              position: canvasMenu.position,\n              size: { width: 300, height: 200 },\n              nodeIds: [],\n              childContainerIds: [],\n              collapsed: false,\n            });\n            onGraphChange(newGraph);\n            onClose();\n          },\n        },\n      ];\n    }\n\n    // 2. NODE Actions\n    if (canvasMenu.type === \"node\") {\n      return [\n        {\n          label: \"Rename\",\n          onClick: () => {\n            onStartRename(canvasMenu.targetId, canvasMenu.position);\n            onClose();\n          },\n        },\n        {\n          label: \"Delete Node\",\n          onClick: () => {\n            if (canvasMenu.targetId) {\n              const newGraph = graph.clone();\n              newGraph.removeNode(canvasMenu.targetId);\n              onGraphChange(newGraph);\n            }\n            onClose();\n          },\n        },\n      ];\n    }\n\n    // 3. CONTAINER Actions\n    if (canvasMenu.type === \"container\") {\n      return [\n        {\n          label: \"Rename\",\n          onClick: () => {\n            onStartRename(canvasMenu.targetId, canvasMenu.position);\n            onClose();\n          },\n        },\n        {\n          label: \"Toggle Collapse\",\n          onClick: () => {\n            if (canvasMenu.targetId) {\n              onToggleContainer(canvasMenu.targetId);\n            }\n            onClose();\n          },\n        },\n        {\n          label: \"Delete Container\",\n          onClick: () => {\n            if (canvasMenu.targetId) {\n              const newGraph = graph.clone();\n              newGraph.removeContainer(canvasMenu.targetId);\n              onGraphChange(newGraph);\n            }\n            onClose();\n          },\n        },\n      ];\n    }\n\n    return [];\n  };\n\n  return (\n    <>\n      {/* 1. Invisible Overlay to catch clicks outside (Close Menu) */}\n      <div\n        style={{\n          position: \"fixed\",\n          top: 0,\n          left: 0,\n          width: \"100vw\",\n          height: \"100vh\",\n          zIndex: 9998, // High Z-Index but below the menu\n        }}\n        onMouseDown={(e) => {\n           e.stopPropagation();\n           onClose();\n        }}\n        onContextMenu={(e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          onClose();\n        }}\n      />\n\n      {/* 2. The Actual Menu */}\n      <div\n        style={{\n          position: \"absolute\",\n          top: canvasMenu.position.y,\n          left: canvasMenu.position.x,\n          zIndex: 9999, // Highest Z-Index\n        }}\n      >\n        <ContextMenu position={canvasMenu.position} options={getOptions()} />\n      </div>\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}