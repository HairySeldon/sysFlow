{"ast":null,"code":"var _jsxFileName = \"/home/belac/sysFlow/src/components/EntityEditor.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const EntityEditor = ({\n  entityId,\n  graph,\n  position,\n  onClose,\n  onGraphChange,\n  enablePorts\n}) => {\n  _s();\n  // 1. Resolve Entity safely\n  const entity = graph.nodesById[entityId] || graph.containersById[entityId];\n\n  // Local state for the label so input is smooth\n  const [label, setLabel] = useState((entity === null || entity === void 0 ? void 0 : entity.label) || \"\");\n  const ref = useRef(null);\n\n  // Sync local label if entity changes externally\n  useEffect(() => {\n    if (entity) setLabel(entity.label);\n  }, [entity === null || entity === void 0 ? void 0 : entity.label]);\n\n  // Click outside to close\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (ref.current && !ref.current.contains(event.target)) {\n        onClose();\n      }\n    };\n    const timeout = setTimeout(() => document.addEventListener(\"mousedown\", handleClickOutside), 100);\n    return () => {\n      clearTimeout(timeout);\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [onClose]);\n  if (!entity) return null;\n\n  // --- Helper to update Graph safely ---\n  // This helper abstracts the cloning logic so we can use it for all operations\n  const handleUpdate = updater => {\n    // 1. Clone Graph\n    // (Tries to keep prototype methods if possible, falls back to shallow copy)\n    const newGraph = graph.clone ? graph.clone() : Object.assign(Object.create(Object.getPrototypeOf(graph)), graph);\n\n    // 2. Find entity in new graph\n    const target = newGraph.nodesById[entityId] || newGraph.containersById[entityId];\n\n    // 3. Apply update\n    if (target) updater(target);\n\n    // 4. Propagate change\n    onGraphChange(newGraph);\n  };\n\n  // --- Port Actions ---\n\n  const addPort = () => {\n    var _entity$ports;\n    const newPort = {\n      id: `p_${crypto.randomUUID()}`,\n      label: `Port ${(((_entity$ports = entity.ports) === null || _entity$ports === void 0 ? void 0 : _entity$ports.length) || 0) + 1}`\n    };\n\n    // FIX: logic now reliably adds the port directly to the data\n    handleUpdate(e => {\n      if (!e.ports) e.ports = [];\n      e.ports.push(newPort);\n    });\n  };\n  const deletePort = portId => {\n    // 1. Try to use the Model method first (if it exists) to clean up connected edges\n    // We do this check on the *current* graph to see if the method exists\n    if (typeof graph.removePortAndEdges === 'function') {\n      const newGraph = graph.clone();\n      newGraph.removePortAndEdges(entityId, portId);\n      onGraphChange(newGraph);\n      return;\n    }\n\n    // 2. Fallback: Manually remove from array (Edges might remain dangling, but Editor won't break)\n    handleUpdate(e => {\n      if (e.ports) {\n        e.ports = e.ports.filter(p => p.id !== portId);\n      }\n    });\n  };\n  const updatePortLabel = (portId, newLabel) => {\n    handleUpdate(e => {\n      var _e$ports;\n      const p = (_e$ports = e.ports) === null || _e$ports === void 0 ? void 0 : _e$ports.find(p => p.id === portId);\n      if (p) p.label = newLabel;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: ref,\n    style: {\n      position: \"fixed\",\n      left: Math.min(position.x, window.innerWidth - 320),\n      top: Math.min(position.y, window.innerHeight - 400),\n      width: \"300px\",\n      backgroundColor: \"white\",\n      boxShadow: \"0 8px 24px rgba(0,0,0,0.15), 0 2px 6px rgba(0,0,0,0.1)\",\n      borderRadius: \"8px\",\n      zIndex: 2000,\n      display: \"flex\",\n      flexDirection: \"column\",\n      fontFamily: \"'Segoe UI', Roboto, Helvetica, Arial, sans-serif\",\n      overflow: \"hidden\",\n      border: \"1px solid #e0e0e0\",\n      animation: \"fadeIn 0.15s ease-out\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"16px 16px 8px 16px\",\n        background: \"#f8f9fa\",\n        borderBottom: \"1px solid #eee\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        value: label,\n        onChange: e => {\n          setLabel(e.target.value);\n          // Updating title directly on every keystroke\n          handleUpdate(ent => ent.label = e.target.value);\n        },\n        placeholder: \"Add title\",\n        style: {\n          display: \"block\",\n          width: \"100%\",\n          border: \"none\",\n          background: \"transparent\",\n          fontWeight: 400,\n          fontSize: \"22px\",\n          outline: \"none\",\n          marginTop: \"8px\",\n          color: \"#202124\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"0\",\n        maxHeight: \"400px\",\n        overflowY: \"auto\"\n      },\n      children: enablePorts && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: \"12px 16px 8px 16px\",\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: \"13px\",\n              fontWeight: 600,\n              color: \"#5f6368\"\n            },\n            children: \"Ports\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: \"100%\",\n            borderCollapse: \"collapse\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [(entity.ports || []).map(port => /*#__PURE__*/_jsxDEV(\"tr\", {\n              style: {\n                borderBottom: \"1px solid #f8f9fa\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  padding: \"4px 16px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: port.label,\n                  onChange: e => updatePortLabel(port.id, e.target.value),\n                  style: {\n                    width: \"100%\",\n                    padding: \"6px 0\",\n                    border: \"none\",\n                    fontSize: \"14px\",\n                    color: \"#3c4043\",\n                    outline: \"none\",\n                    background: \"transparent\"\n                  },\n                  placeholder: \"Port name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 154,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  textAlign: \"right\",\n                  paddingRight: \"12px\",\n                  width: \"40px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => deletePort(port.id),\n                  title: \"Delete Port\",\n                  style: {\n                    color: \"#5f6368\",\n                    border: \"none\",\n                    background: \"none\",\n                    cursor: \"pointer\",\n                    fontSize: \"18px\",\n                    padding: \"4px 8px\",\n                    borderRadius: \"4px\"\n                  },\n                  onMouseOver: e => {\n                    e.currentTarget.style.backgroundColor = \"#fce8e6\";\n                    e.currentTarget.style.color = \"#c5221f\";\n                  },\n                  onMouseOut: e => {\n                    e.currentTarget.style.backgroundColor = \"transparent\";\n                    e.currentTarget.style.color = \"#5f6368\";\n                  },\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 166,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 165,\n                columnNumber: 21\n              }, this)]\n            }, port.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"tr\", {\n              onClick: addPort,\n              style: {\n                cursor: \"pointer\"\n              },\n              onMouseOver: e => e.currentTarget.style.backgroundColor = \"#f8f9fa\",\n              onMouseOut: e => e.currentTarget.style.backgroundColor = \"transparent\",\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: 2,\n                style: {\n                  padding: \"10px 16px\",\n                  color: \"#1a73e8\",\n                  fontSize: \"13px\",\n                  fontWeight: 500\n                },\n                children: \"+ Add a port\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"12px 16px\",\n        background: \"#fff\",\n        borderTop: \"1px solid #f1f3f4\",\n        textAlign: \"right\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        style: {\n          padding: \"8px 24px\",\n          borderRadius: \"4px\",\n          border: \"none\",\n          background: \"#1a73e8\",\n          color: \"white\",\n          fontWeight: 500,\n          cursor: \"pointer\",\n          fontSize: \"14px\"\n        },\n        children: \"Done\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 5\n  }, this);\n};\n_s(EntityEditor, \"DtmoH/sNgDHGGYIZHNhTctqQYXg=\");\n_c = EntityEditor;\nvar _c;\n$RefreshReg$(_c, \"EntityEditor\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","EntityEditor","entityId","graph","position","onClose","onGraphChange","enablePorts","_s","entity","nodesById","containersById","label","setLabel","ref","handleClickOutside","event","current","contains","target","timeout","setTimeout","document","addEventListener","clearTimeout","removeEventListener","handleUpdate","updater","newGraph","clone","Object","assign","create","getPrototypeOf","addPort","_entity$ports","newPort","id","crypto","randomUUID","ports","length","e","push","deletePort","portId","removePortAndEdges","filter","p","updatePortLabel","newLabel","_e$ports","find","style","left","Math","min","x","window","innerWidth","top","y","innerHeight","width","backgroundColor","boxShadow","borderRadius","zIndex","display","flexDirection","fontFamily","overflow","border","animation","children","padding","background","borderBottom","value","onChange","ent","placeholder","fontWeight","fontSize","outline","marginTop","color","fileName","_jsxFileName","lineNumber","columnNumber","maxHeight","overflowY","justifyContent","alignItems","borderCollapse","map","port","textAlign","paddingRight","onClick","title","cursor","onMouseOver","currentTarget","onMouseOut","colSpan","borderTop","_c","$RefreshReg$"],"sources":["/home/belac/sysFlow/src/components/EntityEditor.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Entity, ID, Port } from \"../models/Entity\";\nimport { GraphModel } from \"../models/GraphModel\";\n\ninterface EntityEditorProps {\n  entityId: ID;\n  graph: GraphModel;\n  position: { x: number; y: number };\n  onClose: () => void;\n  onGraphChange: (newGraph: GraphModel) => void;\n  enablePorts: Boolean;\n}\n\nexport const EntityEditor: React.FC<EntityEditorProps> = ({\n  entityId, graph, position, onClose, onGraphChange, enablePorts\n}) => {\n  // 1. Resolve Entity safely\n  const entity = graph.nodesById[entityId] || graph.containersById[entityId];\n\n  // Local state for the label so input is smooth\n  const [label, setLabel] = useState(entity?.label || \"\");\n  const ref = useRef<HTMLDivElement>(null);\n\n  // Sync local label if entity changes externally\n  useEffect(() => {\n    if (entity) setLabel(entity.label);\n  }, [entity?.label]);\n\n  // Click outside to close\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (ref.current && !ref.current.contains(event.target as Node)) {\n        onClose();\n      }\n    };\n    const timeout = setTimeout(() => document.addEventListener(\"mousedown\", handleClickOutside), 100);\n    return () => {\n      clearTimeout(timeout);\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [onClose]);\n\n  if (!entity) return null;\n\n  // --- Helper to update Graph safely ---\n  // This helper abstracts the cloning logic so we can use it for all operations\n  const handleUpdate = (updater: (e: Entity) => void) => {\n    // 1. Clone Graph\n    // (Tries to keep prototype methods if possible, falls back to shallow copy)\n    const newGraph = graph.clone ? graph.clone() : Object.assign(Object.create(Object.getPrototypeOf(graph)), graph);\n\n    // 2. Find entity in new graph\n    const target = newGraph.nodesById[entityId] || newGraph.containersById[entityId];\n\n    // 3. Apply update\n    if (target) updater(target);\n\n    // 4. Propagate change\n    onGraphChange(newGraph);\n  };\n\n  // --- Port Actions ---\n\n  const addPort = () => {\n    const newPort: Port = {\n      id: `p_${crypto.randomUUID()}`,\n      label: `Port ${(entity.ports?.length || 0) + 1}`\n    };\n\n    // FIX: logic now reliably adds the port directly to the data\n    handleUpdate((e) => {\n      if (!e.ports) e.ports = [];\n      e.ports.push(newPort);\n    });\n  };\n\n  const deletePort = (portId: string) => {\n    // 1. Try to use the Model method first (if it exists) to clean up connected edges\n    // We do this check on the *current* graph to see if the method exists\n    if (typeof (graph as any).removePortAndEdges === 'function') {\n        const newGraph = graph.clone();\n        (newGraph as any).removePortAndEdges(entityId, portId);\n        onGraphChange(newGraph);\n        return;\n    }\n\n    // 2. Fallback: Manually remove from array (Edges might remain dangling, but Editor won't break)\n    handleUpdate((e) => {\n      if (e.ports) {\n        e.ports = e.ports.filter(p => p.id !== portId);\n      }\n    });\n  };\n\n  const updatePortLabel = (portId: string, newLabel: string) => {\n    handleUpdate((e) => {\n      const p = e.ports?.find(p => p.id === portId);\n      if (p) p.label = newLabel;\n    });\n  };\n\n  return (\n    <div\n      ref={ref}\n      style={{\n        position: \"fixed\",\n        left: Math.min(position.x, window.innerWidth - 320),\n        top: Math.min(position.y, window.innerHeight - 400),\n        width: \"300px\",\n        backgroundColor: \"white\",\n        boxShadow: \"0 8px 24px rgba(0,0,0,0.15), 0 2px 6px rgba(0,0,0,0.1)\",\n        borderRadius: \"8px\",\n        zIndex: 2000,\n        display: \"flex\",\n        flexDirection: \"column\",\n        fontFamily: \"'Segoe UI', Roboto, Helvetica, Arial, sans-serif\",\n        overflow: \"hidden\",\n        border: \"1px solid #e0e0e0\",\n        animation: \"fadeIn 0.15s ease-out\"\n      }}\n    >\n      {/* Header */}\n      <div style={{ padding: \"16px 16px 8px 16px\", background: \"#f8f9fa\", borderBottom: \"1px solid #eee\" }}>\n        <input\n          value={label}\n          onChange={(e) => {\n            setLabel(e.target.value);\n            // Updating title directly on every keystroke\n            handleUpdate(ent => ent.label = e.target.value);\n          }}\n          placeholder=\"Add title\"\n          style={{\n            display: \"block\", width: \"100%\", border: \"none\", background: \"transparent\",\n            fontWeight: 400, fontSize: \"22px\", outline: \"none\", marginTop: \"8px\", color: \"#202124\"\n          }}\n        />\n      </div>\n\n      <div style={{ padding: \"0\", maxHeight: \"400px\", overflowY: \"auto\" }}>\n        {enablePorts && (\n          <>\n            <div style={{\n              padding: \"12px 16px 8px 16px\",\n              display: \"flex\", justifyContent: \"space-between\", alignItems: \"center\"\n            }}>\n              <span style={{ fontSize: \"13px\", fontWeight: 600, color: \"#5f6368\" }}>Ports</span>\n            </div>\n\n            <table style={{ width: \"100%\", borderCollapse: \"collapse\" }}>\n              <tbody>\n                {(entity.ports || []).map((port) => (\n                  <tr key={port.id} style={{ borderBottom: \"1px solid #f8f9fa\" }}>\n                    <td style={{ padding: \"4px 16px\" }}>\n                      <input\n                        value={port.label}\n                        onChange={(e) => updatePortLabel(port.id, e.target.value)}\n                        style={{\n                          width: \"100%\", padding: \"6px 0\", border: \"none\",\n                          fontSize: \"14px\", color: \"#3c4043\", outline: \"none\",\n                          background: \"transparent\"\n                        }}\n                        placeholder=\"Port name\"\n                      />\n                    </td>\n                    <td style={{ textAlign: \"right\", paddingRight: \"12px\", width: \"40px\" }}>\n                      <button\n                        onClick={() => deletePort(port.id)}\n                        title=\"Delete Port\"\n                        style={{\n                          color: \"#5f6368\", border: \"none\", background: \"none\",\n                          cursor: \"pointer\", fontSize: \"18px\", padding: \"4px 8px\", borderRadius: \"4px\"\n                        }}\n                        onMouseOver={(e) => { e.currentTarget.style.backgroundColor = \"#fce8e6\"; e.currentTarget.style.color = \"#c5221f\" }}\n                        onMouseOut={(e) => { e.currentTarget.style.backgroundColor = \"transparent\"; e.currentTarget.style.color = \"#5f6368\" }}\n                      >\n                        &times;\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n\n                {/* Add Port Row */}\n                <tr\n                  onClick={addPort}\n                  style={{ cursor: \"pointer\" }}\n                  onMouseOver={(e) => e.currentTarget.style.backgroundColor = \"#f8f9fa\"}\n                  onMouseOut={(e) => e.currentTarget.style.backgroundColor = \"transparent\"}\n                >\n                  <td colSpan={2} style={{ padding: \"10px 16px\", color: \"#1a73e8\", fontSize: \"13px\", fontWeight: 500 }}>\n                    + Add a port\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </>\n        )}\n      </div>\n\n      <div style={{ padding: \"12px 16px\", background: \"#fff\", borderTop: \"1px solid #f1f3f4\", textAlign: \"right\" }}>\n        <button\n          onClick={onClose}\n          style={{\n            padding: \"8px 24px\", borderRadius: \"4px\", border: \"none\",\n            background: \"#1a73e8\", color: \"white\", fontWeight: 500, cursor: \"pointer\", fontSize: \"14px\"\n          }}\n        >\n          Done\n        </button>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}