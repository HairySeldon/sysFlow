{"ast":null,"code":"var _jsxFileName = \"/home/belac/sysFlow/src/components/EntityEditor.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst editorWidth = 500;\nexport const EntityEditor = ({\n  entityId,\n  graph,\n  position,\n  onClose,\n  onGraphChange,\n  enablePorts,\n  renderCustomContent\n}) => {\n  _s();\n  // 1. Resolve Entity (Check Nodes, Containers, OR Edges)\n  const entity = graph.nodesById[entityId] || graph.containersById[entityId] || graph.edgesById[entityId];\n\n  // Helper to distinguish types (optional, useful for UI tweaks)\n  const isEdge = !!graph.edgesById[entityId];\n\n  // Local state for the label so input is smooth\n  const [label, setLabel] = useState((entity === null || entity === void 0 ? void 0 : entity.label) || \"\");\n  const ref = useRef(null);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      if (ref.current && !ref.current.contains(event.target)) {\n        onClose();\n      }\n    };\n    const timeout = setTimeout(() => {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    }, 100);\n    return () => {\n      clearTimeout(timeout);\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [onClose]);\n  if (!entity) return null;\n\n  // --- Unified Update Helper ---\n  // This replaces both handleUpdate and handleCustomUpdate logic\n  const handleUpdate = updater => {\n    // 1. Clone Graph\n    const newGraph = graph.clone();\n\n    // 2. Find entity in new graph (Check all types)\n    const target = newGraph.nodesById[entityId] || newGraph.containersById[entityId] || newGraph.edgesById[entityId];\n\n    // 3. Apply update & Propagate\n    if (target) {\n      updater(target);\n      onGraphChange(newGraph);\n    }\n  };\n\n  // Wrapper for the custom content renderer\n  const handleCustomUpdate = updates => {\n    handleUpdate(e => Object.assign(e, updates));\n  };\n\n  // --- Port Actions ---\n  const addPort = () => {\n    var _entity$ports;\n    const newPort = {\n      id: `p_${crypto.randomUUID()}`,\n      label: `Port ${(((_entity$ports = entity.ports) === null || _entity$ports === void 0 ? void 0 : _entity$ports.length) || 0) + 1}`\n    };\n    const newGraph = graph.clone();\n\n    // Use library method if available, otherwise manual fallback\n    if (newGraph.addPortToEntity) {\n      newGraph.addPortToEntity(entityId, newPort);\n    } else {\n      // Manual Fallback for Nodes/Containers\n      const target = newGraph.nodesById[entityId] || newGraph.containersById[entityId];\n      if (target) {\n        target.ports = [...(target.ports || []), newPort];\n      }\n    }\n    onGraphChange(newGraph);\n  };\n  const deletePort = portId => {\n    const newGraph = graph.clone();\n    // Use library method to ensure edges connected to this port are also removed\n    if (newGraph.removePortAndEdges) {\n      newGraph.removePortAndEdges(entityId, portId);\n      onGraphChange(newGraph);\n    }\n  };\n  const updatePortLabel = (portId, newLabel) => {\n    handleUpdate(e => {\n      var _e$ports;\n      const p = (_e$ports = e.ports) === null || _e$ports === void 0 ? void 0 : _e$ports.find(p => p.id === portId);\n      if (p) p.label = newLabel;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: ref,\n    style: {\n      position: \"fixed\",\n      left: Math.min(position.x, window.innerWidth - 320),\n      top: Math.min(position.y, window.innerHeight - 400),\n      //left: (window.innerWidth-editorWidth)/2,\n      //top: (window.innerHeight-800)/2,\n      width: editorWidth,\n      backgroundColor: \"white\",\n      boxShadow: \"0 8px 24px rgba(0,0,0,0.15), 0 2px 6px rgba(0,0,0,0.1)\",\n      borderRadius: \"8px\",\n      zIndex: 2000,\n      display: \"flex\",\n      flexDirection: \"column\",\n      fontFamily: \"'Segoe UI', Roboto, Helvetica, Arial, sans-serif\",\n      overflow: \"hidden\",\n      border: \"1px solid #e0e0e0\",\n      animation: \"fadeIn 0.15s ease-out\"\n    },\n    onMouseDown: e => e.stopPropagation(),\n    onMouseUp: e => e.stopPropagation(),\n    onClick: e => e.stopPropagation(),\n    onDoubleClick: e => e.stopPropagation(),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"16px 16px 8px 16px\",\n        background: \"#f8f9fa\",\n        borderBottom: \"1px solid #eee\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: label,\n        onKeyDown: e => {\n          if (e.key === \"Enter\") {\n            onClose();\n          }\n        },\n        onChange: e => {\n          setLabel(e.target.value);\n          handleUpdate(ent => ent.label = e.target.value);\n        },\n        placeholder: \"Add title\",\n        style: {\n          display: \"block\",\n          width: \"100%\",\n          border: \"none\",\n          background: \"transparent\",\n          fontWeight: 400,\n          fontSize: \"22px\",\n          outline: \"none\",\n          marginTop: \"8px\",\n          color: \"#202124\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: \"11px\",\n          color: \"#888\",\n          marginTop: \"4px\",\n          textTransform: \"uppercase\"\n        },\n        children: isEdge ? \"Edge\" : graph.containersById[entityId] ? \"Container\" : \"Node\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"0\",\n        maxHeight: \"400px\",\n        overflowY: \"auto\"\n      },\n      children: enablePorts && !isEdge && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: \"12px 16px 8px 16px\",\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: \"13px\",\n              fontWeight: 600,\n              color: \"#5f6368\"\n            },\n            children: \"Ports\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: \"100%\",\n            borderCollapse: \"collapse\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [(entity.ports || []).map(port => /*#__PURE__*/_jsxDEV(\"tr\", {\n              style: {\n                borderBottom: \"1px solid #f8f9fa\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  padding: \"4px 16px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: port.label,\n                  onChange: e => updatePortLabel(port.id, e.target.value),\n                  style: {\n                    width: \"100%\",\n                    padding: \"6px 0\",\n                    border: \"none\",\n                    fontSize: \"14px\",\n                    color: \"#3c4043\",\n                    outline: \"none\",\n                    background: \"transparent\"\n                  },\n                  placeholder: \"Port name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  textAlign: \"right\",\n                  paddingRight: \"12px\",\n                  width: \"40px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => deletePort(port.id),\n                  title: \"Delete Port\",\n                  style: {\n                    color: \"#5f6368\",\n                    border: \"none\",\n                    background: \"none\",\n                    cursor: \"pointer\",\n                    fontSize: \"18px\",\n                    padding: \"4px 8px\",\n                    borderRadius: \"4px\"\n                  },\n                  onMouseOver: e => {\n                    e.currentTarget.style.backgroundColor = \"#fce8e6\";\n                    e.currentTarget.style.color = \"#c5221f\";\n                  },\n                  onMouseOut: e => {\n                    e.currentTarget.style.backgroundColor = \"transparent\";\n                    e.currentTarget.style.color = \"#5f6368\";\n                  },\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 21\n              }, this)]\n            }, port.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 19\n            }, this)), /*#__PURE__*/_jsxDEV(\"tr\", {\n              onClick: addPort,\n              style: {\n                cursor: \"pointer\"\n              },\n              onMouseOver: e => e.currentTarget.style.backgroundColor = \"#f8f9fa\",\n              onMouseOut: e => e.currentTarget.style.backgroundColor = \"transparent\",\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: 2,\n                style: {\n                  padding: \"10px 16px\",\n                  color: \"#1a73e8\",\n                  fontSize: \"13px\",\n                  fontWeight: 500\n                },\n                children: \"+ Add a port\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 248,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this), renderCustomContent && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        borderTop: \"1px solid #eee\",\n        paddingTop: 10,\n        marginTop: 10\n      },\n      children: renderCustomContent(entity, handleCustomUpdate)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"12px 16px\",\n        background: \"#fff\",\n        borderTop: \"1px solid #f1f3f4\",\n        textAlign: \"right\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        style: {\n          padding: \"8px 24px\",\n          borderRadius: \"4px\",\n          border: \"none\",\n          background: \"#1a73e8\",\n          color: \"white\",\n          fontWeight: 500,\n          cursor: \"pointer\",\n          fontSize: \"14px\"\n        },\n        children: \"Done\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 5\n  }, this);\n};\n_s(EntityEditor, \"h4UNUBt8ZhG3WIwiqjP5l8YN09w=\");\n_c = EntityEditor;\nvar _c;\n$RefreshReg$(_c, \"EntityEditor\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","editorWidth","EntityEditor","entityId","graph","position","onClose","onGraphChange","enablePorts","renderCustomContent","_s","entity","nodesById","containersById","edgesById","isEdge","label","setLabel","ref","handleClickOutside","event","current","contains","target","timeout","setTimeout","document","addEventListener","clearTimeout","removeEventListener","handleUpdate","updater","newGraph","clone","handleCustomUpdate","updates","e","Object","assign","addPort","_entity$ports","newPort","id","crypto","randomUUID","ports","length","addPortToEntity","deletePort","portId","removePortAndEdges","updatePortLabel","newLabel","_e$ports","p","find","style","left","Math","min","x","window","innerWidth","top","y","innerHeight","width","backgroundColor","boxShadow","borderRadius","zIndex","display","flexDirection","fontFamily","overflow","border","animation","onMouseDown","stopPropagation","onMouseUp","onClick","onDoubleClick","children","padding","background","borderBottom","value","onKeyDown","key","onChange","ent","placeholder","fontWeight","fontSize","outline","marginTop","color","fileName","_jsxFileName","lineNumber","columnNumber","textTransform","maxHeight","overflowY","justifyContent","alignItems","borderCollapse","map","port","textAlign","paddingRight","title","cursor","onMouseOver","currentTarget","onMouseOut","colSpan","borderTop","paddingTop","_c","$RefreshReg$"],"sources":["/home/belac/sysFlow/src/components/EntityEditor.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Entity, ID, Port } from \"../models/Entity\";\nimport { GraphModel } from \"../models/GraphModel\";\n\nconst editorWidth = 500;\n\ninterface EntityEditorProps {\n  entityId: ID;\n  graph: GraphModel;\n  position: { x: number; y: number };\n  onClose: () => void;\n  onGraphChange: (newGraph: GraphModel) => void;\n  enablePorts: boolean;\n  renderCustomContent?: (entity: Entity, updateEntity: (updates: Partial<Entity>) => void) => React.ReactNode;\n}\n\nexport const EntityEditor: React.FC<EntityEditorProps> = ({\n  entityId,\n  graph,\n  position,\n  onClose,\n  onGraphChange,\n  enablePorts,\n  renderCustomContent\n}) => {\n  // 1. Resolve Entity (Check Nodes, Containers, OR Edges)\n  const entity =\n    graph.nodesById[entityId] ||\n    graph.containersById[entityId] ||\n    graph.edgesById[entityId];\n\n  // Helper to distinguish types (optional, useful for UI tweaks)\n  const isEdge = !!graph.edgesById[entityId];\n\n  // Local state for the label so input is smooth\n  const [label, setLabel] = useState(entity?.label || \"\");\n\n  const ref = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (ref.current && !ref.current.contains(event.target as Node)) {\n        onClose();\n      }\n    };\n    const timeout = setTimeout(() => {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    }, 100);\n    return () => {\n      clearTimeout(timeout);\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [onClose]);\n\n  if (!entity) return null;\n\n  // --- Unified Update Helper ---\n  // This replaces both handleUpdate and handleCustomUpdate logic\n  const handleUpdate = (updater: (e: Entity) => void) => {\n    // 1. Clone Graph\n    const newGraph = graph.clone();\n\n    // 2. Find entity in new graph (Check all types)\n    const target =\n      newGraph.nodesById[entityId] ||\n      newGraph.containersById[entityId] ||\n      newGraph.edgesById[entityId];\n\n    // 3. Apply update & Propagate\n    if (target) {\n      updater(target);\n      onGraphChange(newGraph);\n    }\n  };\n\n  // Wrapper for the custom content renderer\n  const handleCustomUpdate = (updates: Partial<Entity>) => {\n    handleUpdate((e) => Object.assign(e, updates));\n  };\n\n  // --- Port Actions ---\n  const addPort = () => {\n    const newPort: Port = {\n      id: `p_${crypto.randomUUID()}`,\n      label: `Port ${(entity.ports?.length || 0) + 1}`,\n    };\n    \n    const newGraph = graph.clone();\n    \n    // Use library method if available, otherwise manual fallback\n    if (newGraph.addPortToEntity) {\n        newGraph.addPortToEntity(entityId, newPort);\n    } else {\n        // Manual Fallback for Nodes/Containers\n        const target = newGraph.nodesById[entityId] || newGraph.containersById[entityId];\n        if (target) {\n            target.ports = [...(target.ports || []), newPort];\n        }\n    }\n    onGraphChange(newGraph);\n  };\n\n  const deletePort = (portId: string) => {\n    const newGraph = graph.clone();\n    // Use library method to ensure edges connected to this port are also removed\n    if (newGraph.removePortAndEdges) {\n      newGraph.removePortAndEdges(entityId, portId);\n      onGraphChange(newGraph);\n    }\n  };\n\n  const updatePortLabel = (portId: string, newLabel: string) => {\n    handleUpdate((e) => {\n      const p = e.ports?.find((p) => p.id === portId);\n      if (p) p.label = newLabel;\n    });\n  };\n\n  return (\n    <div\n      ref={ref}\n      style={{\n        position: \"fixed\",\n        left: Math.min(position.x, window.innerWidth - 320),\n        top: Math.min(position.y, window.innerHeight - 400),\n        //left: (window.innerWidth-editorWidth)/2,\n        //top: (window.innerHeight-800)/2,\n        width: editorWidth,\n        backgroundColor: \"white\",\n        boxShadow: \"0 8px 24px rgba(0,0,0,0.15), 0 2px 6px rgba(0,0,0,0.1)\",\n        borderRadius: \"8px\",\n        zIndex: 2000,\n        display: \"flex\",\n        flexDirection: \"column\",\n        fontFamily: \"'Segoe UI', Roboto, Helvetica, Arial, sans-serif\",\n        overflow: \"hidden\",\n        border: \"1px solid #e0e0e0\",\n        animation: \"fadeIn 0.15s ease-out\",\n      }}\n      onMouseDown={(e) => e.stopPropagation()}\n      onMouseUp={(e) => e.stopPropagation()}\n      onClick={(e) => e.stopPropagation()}\n      onDoubleClick={(e) => e.stopPropagation()}\n    >\n      {/* Header */}\n      <div style={{ padding: \"16px 16px 8px 16px\", background: \"#f8f9fa\", borderBottom: \"1px solid #eee\" }}>\n        <input\n          value={label}\n          onKeyDown={(e) => {\n            if (e.key === \"Enter\") {\n              onClose();\n            }\n          }}\n          onChange={(e) => {\n            setLabel(e.target.value);\n            handleUpdate((ent) => (ent.label = e.target.value));\n          }}\n          placeholder=\"Add title\"\n          style={{\n            display: \"block\",\n            width: \"100%\",\n            border: \"none\",\n            background: \"transparent\",\n            fontWeight: 400,\n            fontSize: \"22px\",\n            outline: \"none\",\n            marginTop: \"8px\",\n            color: \"#202124\",\n          }}\n        />\n        {/* Optional: Label identifying type */}\n        <div style={{fontSize: \"11px\", color: \"#888\", marginTop: \"4px\", textTransform:\"uppercase\"}}>\n            {isEdge ? \"Edge\" : (graph.containersById[entityId] ? \"Container\" : \"Node\")}\n        </div>\n      </div>\n\n      <div style={{ padding: \"0\", maxHeight: \"400px\", overflowY: \"auto\" }}>\n        \n        {/* Port Manager - (Hidden for Edges) */}\n        {enablePorts && !isEdge && (\n          <>\n            <div\n              style={{\n                padding: \"12px 16px 8px 16px\",\n                display: \"flex\",\n                justifyContent: \"space-between\",\n                alignItems: \"center\",\n              }}\n            >\n              <span style={{ fontSize: \"13px\", fontWeight: 600, color: \"#5f6368\" }}>Ports</span>\n            </div>\n\n            <table style={{ width: \"100%\", borderCollapse: \"collapse\" }}>\n              <tbody>\n                {(entity.ports || []).map((port) => (\n                  <tr key={port.id} style={{ borderBottom: \"1px solid #f8f9fa\" }}>\n                    <td style={{ padding: \"4px 16px\" }}>\n                      <input\n                        value={port.label}\n                        onChange={(e) => updatePortLabel(port.id, e.target.value)}\n                        style={{\n                          width: \"100%\",\n                          padding: \"6px 0\",\n                          border: \"none\",\n                          fontSize: \"14px\",\n                          color: \"#3c4043\",\n                          outline: \"none\",\n                          background: \"transparent\",\n                        }}\n                        placeholder=\"Port name\"\n                      />\n                    </td>\n                    <td style={{ textAlign: \"right\", paddingRight: \"12px\", width: \"40px\" }}>\n                      <button\n                        onClick={() => deletePort(port.id)}\n                        title=\"Delete Port\"\n                        style={{\n                          color: \"#5f6368\",\n                          border: \"none\",\n                          background: \"none\",\n                          cursor: \"pointer\",\n                          fontSize: \"18px\",\n                          padding: \"4px 8px\",\n                          borderRadius: \"4px\",\n                        }}\n                        onMouseOver={(e) => {\n                          e.currentTarget.style.backgroundColor = \"#fce8e6\";\n                          e.currentTarget.style.color = \"#c5221f\";\n                        }}\n                        onMouseOut={(e) => {\n                          e.currentTarget.style.backgroundColor = \"transparent\";\n                          e.currentTarget.style.color = \"#5f6368\";\n                        }}\n                      >\n                        &times;\n                      </button>\n                    </td>\n                  </tr>\n                ))}\n\n                {/* Add Port Row */}\n                <tr\n                  onClick={addPort}\n                  style={{ cursor: \"pointer\" }}\n                  onMouseOver={(e) => (e.currentTarget.style.backgroundColor = \"#f8f9fa\")}\n                  onMouseOut={(e) => (e.currentTarget.style.backgroundColor = \"transparent\")}\n                >\n                  <td\n                    colSpan={2}\n                    style={{ padding: \"10px 16px\", color: \"#1a73e8\", fontSize: \"13px\", fontWeight: 500 }}\n                  >\n                    + Add a port\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </>\n        )}\n      </div>\n\n      {/* Custom Content from App */}\n      {renderCustomContent && (\n        <div style={{ borderTop: \"1px solid #eee\", paddingTop: 10, marginTop: 10 }}>\n            {/* FIX: Pass 'entity' (resolved above) instead of 'node' */}\n            {renderCustomContent(entity, handleCustomUpdate)}\n        </div>\n      )}\n\n      {/* Footer */}\n      <div style={{ padding: \"12px 16px\", background: \"#fff\", borderTop: \"1px solid #f1f3f4\", textAlign: \"right\" }}>\n        <button\n          onClick={onClose}\n          style={{\n            padding: \"8px 24px\",\n            borderRadius: \"4px\",\n            border: \"none\",\n            background: \"#1a73e8\",\n            color: \"white\",\n            fontWeight: 500,\n            cursor: \"pointer\",\n            fontSize: \"14px\",\n          }}\n        >\n          Done\n        </button>\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}