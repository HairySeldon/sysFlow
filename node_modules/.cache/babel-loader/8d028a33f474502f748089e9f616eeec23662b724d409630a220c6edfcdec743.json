{"ast":null,"code":"var _jsxFileName = \"/home/belac/sysFlow/src/components/EntityEditor.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const EntityEditor = ({\n  entityId,\n  graph,\n  position,\n  onClose,\n  onGraphChange,\n  enablePorts,\n  renderCustomContent\n}) => {\n  _s();\n  // 1. Resolve Entity\n  const entity = graph.nodesById[entityId] || graph.containersById[entityId];\n\n  // Local state for the label so input is smooth\n  const [label, setLabel] = useState((entity === null || entity === void 0 ? void 0 : entity.label) || \"\");\n\n  // Ref to detect clicking outside\n  const ref = useRef(null);\n  useEffect(() => {\n    const handleClickOutside = event => {\n      // If click is outside the editor AND outside any potential portals (like dropdowns)\n      if (ref.current && !ref.current.contains(event.target)) {\n        onClose();\n      }\n    };\n    // Delay adding the listener slightly to avoid closing immediately upon opening\n    const timeout = setTimeout(() => {\n      document.addEventListener(\"mousedown\", handleClickOutside);\n    }, 100);\n    return () => {\n      clearTimeout(timeout);\n      document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [onClose]);\n  if (!entity) return null;\n  const handleCustomUpdate = updates => {\n    const newGraph = graph.clone();\n    const targetNode = newGraph.nodesById[entityId];\n    if (targetNode) {\n      Object.assign(targetNode, updates);\n      onGraphChange(newGraph);\n    }\n    // TODO: Support containers\n  };\n\n  // --- Helper to update Graph safely ---\n  const handleUpdate = updater => {\n    // 1. Clone Graph (using your clone method or shallow copy)\n    const newGraph = graph.clone ? graph.clone() : Object.assign(Object.create(Object.getPrototypeOf(graph)), graph);\n\n    // 2. Find entity in new graph\n    const target = newGraph.nodesById[entityId] || newGraph.containersById[entityId];\n\n    // 3. Apply update\n    if (target) updater(target);\n\n    // 4. Propagate change\n    onGraphChange(newGraph);\n  };\n\n  // --- Port Actions ---\n  const addPort = () => {\n    var _entity$ports;\n    const newPort = {\n      id: `p_${crypto.randomUUID()}`,\n      label: `Port ${(((_entity$ports = entity.ports) === null || _entity$ports === void 0 ? void 0 : _entity$ports.length) || 0) + 1}`\n    };\n    const newGraph = graph.clone ? graph.clone() : Object.assign(Object.create(Object.getPrototypeOf(graph)), graph);\n    newGraph.addPortToEntity(entityId, newPort);\n    onGraphChange(newGraph);\n  };\n  const deletePort = portId => {\n    console.log(\"DELETE PORT\");\n    // Crucial: Use the helper that deletes connected edges too\n    const newGraph = graph.clone ? graph.clone() : Object.assign(Object.create(Object.getPrototypeOf(graph)), graph);\n    if (newGraph.removePortAndEdges) {\n      newGraph.removePortAndEdges(entityId, portId);\n      onGraphChange(newGraph);\n    }\n  };\n  const updatePortLabel = (portId, newLabel) => {\n    handleUpdate(e => {\n      var _e$ports;\n      const p = (_e$ports = e.ports) === null || _e$ports === void 0 ? void 0 : _e$ports.find(p => p.id === portId);\n      if (p) p.label = newLabel;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: ref,\n    style: {\n      position: \"fixed\",\n      left: Math.min(position.x, window.innerWidth - 320),\n      // Prevent going off-screen right\n      top: Math.min(position.y, window.innerHeight - 400),\n      // Prevent going off-screen bottom\n      width: \"300px\",\n      backgroundColor: \"white\",\n      boxShadow: \"0 8px 24px rgba(0,0,0,0.15), 0 2px 6px rgba(0,0,0,0.1)\",\n      borderRadius: \"8px\",\n      zIndex: 2000,\n      display: \"flex\",\n      flexDirection: \"column\",\n      fontFamily: \"'Segoe UI', Roboto, Helvetica, Arial, sans-serif\",\n      overflow: \"hidden\",\n      border: \"1px solid #e0e0e0\",\n      animation: \"fadeIn 0.15s ease-out\"\n    },\n    onMouseDown: e => e.stopPropagation(),\n    onMouseUp: e => e.stopPropagation(),\n    onClick: e => e.stopPropagation(),\n    onDoubleClick: e => e.stopPropagation(),\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"16px 16px 8px 16px\",\n        background: \"#f8f9fa\",\n        borderBottom: \"1px solid #eee\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        value: label,\n        onChange: e => {\n          setLabel(e.target.value);\n          // Debounce or direct update? Direct for responsiveness, but could be optimized.\n          handleUpdate(ent => ent.label = e.target.value);\n        },\n        placeholder: \"Add title\",\n        style: {\n          display: \"block\",\n          width: \"100%\",\n          border: \"none\",\n          background: \"transparent\",\n          fontWeight: 400,\n          fontSize: \"22px\",\n          outline: \"none\",\n          marginTop: \"8px\",\n          color: \"#202124\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"0\",\n        maxHeight: \"400px\",\n        overflowY: \"auto\"\n      },\n      children: enablePorts && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: \"12px 16px 8px 16px\",\n            display: \"flex\",\n            justifyContent: \"space-between\",\n            alignItems: \"center\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              fontSize: \"13px\",\n              fontWeight: 600,\n              color: \"#5f6368\"\n            },\n            children: \"Ports\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          style: {\n            width: \"100%\",\n            borderCollapse: \"collapse\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: [(entity.ports || []).map(port => /*#__PURE__*/_jsxDEV(\"tr\", {\n              style: {\n                borderBottom: \"1px solid #f8f9fa\"\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  padding: \"4px 16px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  value: port.label,\n                  onChange: e => updatePortLabel(port.id, e.target.value),\n                  style: {\n                    width: \"100%\",\n                    padding: \"6px 0\",\n                    border: \"none\",\n                    fontSize: \"14px\",\n                    color: \"#3c4043\",\n                    outline: \"none\",\n                    background: \"transparent\"\n                  },\n                  placeholder: \"Port name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                style: {\n                  textAlign: \"right\",\n                  paddingRight: \"12px\",\n                  width: \"40px\"\n                },\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => deletePort(port.id),\n                  title: \"Delete Port\",\n                  style: {\n                    color: \"#5f6368\",\n                    border: \"none\",\n                    background: \"none\",\n                    cursor: \"pointer\",\n                    fontSize: \"18px\",\n                    padding: \"4px 8px\",\n                    borderRadius: \"4px\"\n                  },\n                  onMouseOver: e => {\n                    e.currentTarget.style.backgroundColor = \"#fce8e6\";\n                    e.currentTarget.style.color = \"#c5221f\";\n                  },\n                  onMouseOut: e => {\n                    e.currentTarget.style.backgroundColor = \"transparent\";\n                    e.currentTarget.style.color = \"#5f6368\";\n                  },\n                  children: \"\\xD7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 172,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 171,\n                columnNumber: 17\n              }, this)]\n            }, port.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 15\n            }, this)), /*#__PURE__*/_jsxDEV(\"tr\", {\n              onClick: addPort,\n              style: {\n                cursor: \"pointer\"\n              },\n              onMouseOver: e => e.currentTarget.style.backgroundColor = \"#f8f9fa\",\n              onMouseOut: e => e.currentTarget.style.backgroundColor = \"transparent\",\n              children: /*#__PURE__*/_jsxDEV(\"td\", {\n                colSpan: 2,\n                style: {\n                  padding: \"10px 16px\",\n                  color: \"#1a73e8\",\n                  fontSize: \"13px\",\n                  fontWeight: 500\n                },\n                children: \"+ Add a port\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: \"12px 16px\",\n        background: \"#fff\",\n        borderTop: \"1px solid #f1f3f4\",\n        textAlign: \"right\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        style: {\n          padding: \"8px 24px\",\n          borderRadius: \"4px\",\n          border: \"none\",\n          background: \"#1a73e8\",\n          color: \"white\",\n          fontWeight: 500,\n          cursor: \"pointer\",\n          fontSize: \"14px\"\n        },\n        children: \"Done\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n_s(EntityEditor, \"h4UNUBt8ZhG3WIwiqjP5l8YN09w=\");\n_c = EntityEditor;\nvar _c;\n$RefreshReg$(_c, \"EntityEditor\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","EntityEditor","entityId","graph","position","onClose","onGraphChange","enablePorts","renderCustomContent","_s","entity","nodesById","containersById","label","setLabel","ref","handleClickOutside","event","current","contains","target","timeout","setTimeout","document","addEventListener","clearTimeout","removeEventListener","handleCustomUpdate","updates","newGraph","clone","targetNode","Object","assign","handleUpdate","updater","create","getPrototypeOf","addPort","_entity$ports","newPort","id","crypto","randomUUID","ports","length","addPortToEntity","deletePort","portId","console","log","removePortAndEdges","updatePortLabel","newLabel","e","_e$ports","p","find","style","left","Math","min","x","window","innerWidth","top","y","innerHeight","width","backgroundColor","boxShadow","borderRadius","zIndex","display","flexDirection","fontFamily","overflow","border","animation","onMouseDown","stopPropagation","onMouseUp","onClick","onDoubleClick","children","padding","background","borderBottom","value","onChange","ent","placeholder","fontWeight","fontSize","outline","marginTop","color","fileName","_jsxFileName","lineNumber","columnNumber","maxHeight","overflowY","justifyContent","alignItems","borderCollapse","map","port","textAlign","paddingRight","title","cursor","onMouseOver","currentTarget","onMouseOut","colSpan","borderTop","_c","$RefreshReg$"],"sources":["/home/belac/sysFlow/src/components/EntityEditor.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { Entity, ID, Port } from \"../models/Entity\";\nimport { GraphModel } from \"../models/GraphModel\";\n\ninterface EntityEditorProps {\n  entityId: ID;\n  graph: GraphModel;\n  position: { x: number; y: number }; // Screen position to anchor popup\n  onClose: () => void;\n  onGraphChange: (newGraph: GraphModel) => void;\n  enablePorts: Boolean;\n  renderCustomerContent?: (entity: Entity, updateEntity: (updates: Partial<Entity>) => void) => React.ReactNode;\n}\n\nexport const EntityEditor: React.FC<EntityEditorProps> = ({ \n  entityId, graph, position, onClose, onGraphChange, enablePorts, renderCustomContent\n}) => {\n  // 1. Resolve Entity\n  const entity = graph.nodesById[entityId] || graph.containersById[entityId];\n  \n  // Local state for the label so input is smooth\n  const [label, setLabel] = useState(entity?.label || \"\");\n  \n  // Ref to detect clicking outside\n  const ref = useRef<HTMLDivElement>(null);\n\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      // If click is outside the editor AND outside any potential portals (like dropdowns)\n      if (ref.current && !ref.current.contains(event.target as Node)) {\n        onClose();\n      }\n    };\n    // Delay adding the listener slightly to avoid closing immediately upon opening\n    const timeout = setTimeout(() => {\n        document.addEventListener(\"mousedown\", handleClickOutside);\n    }, 100);\n    \n    return () => {\n        clearTimeout(timeout);\n        document.removeEventListener(\"mousedown\", handleClickOutside);\n    };\n  }, [onClose]);\n\n  if (!entity) return null;\n\n  const handleCustomUpdate = (updates: Partial<Entity>) => {\n    const newGraph = graph.clone();\n    const targetNode = newGraph.nodesById[entityId];\n    if(targetNode) {\n      Object.assign(targetNode, updates);\n      onGraphChange(newGraph);\n    }\n    // TODO: Support containers\n  };\n\n  // --- Helper to update Graph safely ---\n  const handleUpdate = (updater: (e: Entity) => void) => {\n    // 1. Clone Graph (using your clone method or shallow copy)\n    const newGraph = graph.clone ? graph.clone() : Object.assign(Object.create(Object.getPrototypeOf(graph)), graph);\n    \n    // 2. Find entity in new graph\n    const target = newGraph.nodesById[entityId] || newGraph.containersById[entityId];\n    \n    // 3. Apply update\n    if (target) updater(target);\n    \n    // 4. Propagate change\n    onGraphChange(newGraph);\n  };\n\n  // --- Port Actions ---\n  const addPort = () => {\n    const newPort: Port = { \n        id: `p_${crypto.randomUUID()}`, \n        label: `Port ${(entity.ports?.length || 0) + 1}` \n    };\n    \n    const newGraph = graph.clone ? graph.clone() : Object.assign(Object.create(Object.getPrototypeOf(graph)), graph);\n    newGraph.addPortToEntity(entityId, newPort);\n    onGraphChange(newGraph);\n  };\n\n  const deletePort = (portId: string) => {\n    console.log(\"DELETE PORT\");\n    // Crucial: Use the helper that deletes connected edges too\n    const newGraph = graph.clone ? graph.clone() : Object.assign(Object.create(Object.getPrototypeOf(graph)), graph);\n    if (newGraph.removePortAndEdges) {\n        newGraph.removePortAndEdges(entityId, portId);\n        onGraphChange(newGraph);\n    }\n  };\n\n  const updatePortLabel = (portId: string, newLabel: string) => {\n    handleUpdate(e => {\n        const p = e.ports?.find(p => p.id === portId);\n        if (p) p.label = newLabel;\n    });\n  };\n\n  return (\n    <div \n      ref={ref}\n      style={{\n        position: \"fixed\", \n        left: Math.min(position.x, window.innerWidth - 320), // Prevent going off-screen right\n        top: Math.min(position.y, window.innerHeight - 400), // Prevent going off-screen bottom\n        width: \"300px\",\n        backgroundColor: \"white\",\n        boxShadow: \"0 8px 24px rgba(0,0,0,0.15), 0 2px 6px rgba(0,0,0,0.1)\",\n        borderRadius: \"8px\",\n        zIndex: 2000,\n        display: \"flex\",\n        flexDirection: \"column\",\n        fontFamily: \"'Segoe UI', Roboto, Helvetica, Arial, sans-serif\",\n        overflow: \"hidden\",\n        border: \"1px solid #e0e0e0\",\n        animation: \"fadeIn 0.15s ease-out\"\n      }}\n      onMouseDown={(e) => e.stopPropagation()} \n      onMouseUp={(e) => e.stopPropagation()}\n      onClick={(e) => e.stopPropagation()}\n      onDoubleClick={(e) => e.stopPropagation()}\n    >\n      {/* Header */}\n      <div style={{ padding: \"16px 16px 8px 16px\", background: \"#f8f9fa\", borderBottom: \"1px solid #eee\" }}>\n        <input \n          value={label}\n          onChange={(e) => {\n            setLabel(e.target.value);\n            // Debounce or direct update? Direct for responsiveness, but could be optimized.\n            handleUpdate(ent => ent.label = e.target.value);\n          }}\n          placeholder=\"Add title\"\n          style={{ \n            display: \"block\", width: \"100%\", border: \"none\", background: \"transparent\", \n            fontWeight: 400, fontSize: \"22px\", outline: \"none\", marginTop: \"8px\", color: \"#202124\"\n          }}\n        />\n      </div>\n\n      <div style={{ padding: \"0\", maxHeight: \"400px\", overflowY: \"auto\" }}>\n        \n        {/* Port Manager Header */}\n        {enablePorts && (\n        <>\n        <div style={{\n            padding: \"12px 16px 8px 16px\", \n            display:\"flex\", justifyContent:\"space-between\", alignItems:\"center\"\n        }}>\n            <span style={{fontSize: \"13px\", fontWeight: 600, color: \"#5f6368\"}}>Ports</span>\n        </div>\n\n        {/* Port List */}\n        <table style={{ width: \"100%\", borderCollapse: \"collapse\" }}>\n          <tbody>\n            {(entity.ports || []).map((port) => (\n              <tr key={port.id} style={{ borderBottom: \"1px solid #f8f9fa\" }}>\n                <td style={{ padding: \"4px 16px\" }}>\n                  <input\n                    value={port.label}\n                    onChange={(e) => updatePortLabel(port.id, e.target.value)}\n                    style={{ \n                        width: \"100%\", padding: \"6px 0\", border: \"none\", \n                        fontSize: \"14px\", color: \"#3c4043\", outline: \"none\",\n                        background: \"transparent\"\n                    }}\n                    placeholder=\"Port name\"\n                  />\n                </td>\n                <td style={{ textAlign: \"right\", paddingRight: \"12px\", width: \"40px\" }}>\n                  <button \n                    onClick={() => deletePort(port.id)}\n                    title=\"Delete Port\"\n                    style={{ \n                        color: \"#5f6368\", border: \"none\", background: \"none\", \n                        cursor: \"pointer\", fontSize: \"18px\", padding: \"4px 8px\", borderRadius: \"4px\"\n                    }}\n                    onMouseOver={(e) => {e.currentTarget.style.backgroundColor = \"#fce8e6\"; e.currentTarget.style.color = \"#c5221f\"}}\n                    onMouseOut={(e) => {e.currentTarget.style.backgroundColor = \"transparent\"; e.currentTarget.style.color = \"#5f6368\"}}\n                  >\n                    &times;\n                  </button>\n                </td>\n              </tr>\n            ))}\n            \n            {/* Add Port Row */}\n            <tr \n                onClick={addPort}\n                style={{ cursor: \"pointer\" }}\n                onMouseOver={(e) => e.currentTarget.style.backgroundColor = \"#f8f9fa\"}\n                onMouseOut={(e) => e.currentTarget.style.backgroundColor = \"transparent\"}\n            >\n                <td colSpan={2} style={{ padding: \"10px 16px\", color: \"#1a73e8\", fontSize: \"13px\", fontWeight: 500 }}>\n                    + Add a port\n                </td>\n            </tr>\n          </tbody>\n        </table>\n      </>\n      )}\n      </div>\n      \n      {/* Footer */}\n      <div style={{padding: \"12px 16px\", background: \"#fff\", borderTop: \"1px solid #f1f3f4\", textAlign: \"right\"}}>\n          <button \n            onClick={onClose} \n            style={{\n                padding: \"8px 24px\", borderRadius: \"4px\", border: \"none\", \n                background: \"#1a73e8\", color: \"white\", fontWeight: 500, cursor: \"pointer\", fontSize: \"14px\"\n            }}\n          >\n            Done\n          </button>\n      </div>\n    </div>\n  );\n};\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAc3D,OAAO,MAAMC,YAAyC,GAAGA,CAAC;EACxDC,QAAQ;EAAEC,KAAK;EAAEC,QAAQ;EAAEC,OAAO;EAAEC,aAAa;EAAEC,WAAW;EAAEC;AAClE,CAAC,KAAK;EAAAC,EAAA;EACJ;EACA,MAAMC,MAAM,GAAGP,KAAK,CAACQ,SAAS,CAACT,QAAQ,CAAC,IAAIC,KAAK,CAACS,cAAc,CAACV,QAAQ,CAAC;;EAE1E;EACA,MAAM,CAACW,KAAK,EAAEC,QAAQ,CAAC,GAAGpB,QAAQ,CAAC,CAAAgB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEG,KAAK,KAAI,EAAE,CAAC;;EAEvD;EACA,MAAME,GAAG,GAAGnB,MAAM,CAAiB,IAAI,CAAC;EAExCD,SAAS,CAAC,MAAM;IACd,MAAMqB,kBAAkB,GAAIC,KAAiB,IAAK;MAChD;MACA,IAAIF,GAAG,CAACG,OAAO,IAAI,CAACH,GAAG,CAACG,OAAO,CAACC,QAAQ,CAACF,KAAK,CAACG,MAAc,CAAC,EAAE;QAC9Df,OAAO,CAAC,CAAC;MACX;IACF,CAAC;IACD;IACA,MAAMgB,OAAO,GAAGC,UAAU,CAAC,MAAM;MAC7BC,QAAQ,CAACC,gBAAgB,CAAC,WAAW,EAAER,kBAAkB,CAAC;IAC9D,CAAC,EAAE,GAAG,CAAC;IAEP,OAAO,MAAM;MACTS,YAAY,CAACJ,OAAO,CAAC;MACrBE,QAAQ,CAACG,mBAAmB,CAAC,WAAW,EAAEV,kBAAkB,CAAC;IACjE,CAAC;EACH,CAAC,EAAE,CAACX,OAAO,CAAC,CAAC;EAEb,IAAI,CAACK,MAAM,EAAE,OAAO,IAAI;EAExB,MAAMiB,kBAAkB,GAAIC,OAAwB,IAAK;IACvD,MAAMC,QAAQ,GAAG1B,KAAK,CAAC2B,KAAK,CAAC,CAAC;IAC9B,MAAMC,UAAU,GAAGF,QAAQ,CAAClB,SAAS,CAACT,QAAQ,CAAC;IAC/C,IAAG6B,UAAU,EAAE;MACbC,MAAM,CAACC,MAAM,CAACF,UAAU,EAAEH,OAAO,CAAC;MAClCtB,aAAa,CAACuB,QAAQ,CAAC;IACzB;IACA;EACF,CAAC;;EAED;EACA,MAAMK,YAAY,GAAIC,OAA4B,IAAK;IACrD;IACA,MAAMN,QAAQ,GAAG1B,KAAK,CAAC2B,KAAK,GAAG3B,KAAK,CAAC2B,KAAK,CAAC,CAAC,GAAGE,MAAM,CAACC,MAAM,CAACD,MAAM,CAACI,MAAM,CAACJ,MAAM,CAACK,cAAc,CAAClC,KAAK,CAAC,CAAC,EAAEA,KAAK,CAAC;;IAEhH;IACA,MAAMiB,MAAM,GAAGS,QAAQ,CAAClB,SAAS,CAACT,QAAQ,CAAC,IAAI2B,QAAQ,CAACjB,cAAc,CAACV,QAAQ,CAAC;;IAEhF;IACA,IAAIkB,MAAM,EAAEe,OAAO,CAACf,MAAM,CAAC;;IAE3B;IACAd,aAAa,CAACuB,QAAQ,CAAC;EACzB,CAAC;;EAED;EACA,MAAMS,OAAO,GAAGA,CAAA,KAAM;IAAA,IAAAC,aAAA;IACpB,MAAMC,OAAa,GAAG;MAClBC,EAAE,EAAE,KAAKC,MAAM,CAACC,UAAU,CAAC,CAAC,EAAE;MAC9B9B,KAAK,EAAE,QAAQ,CAAC,EAAA0B,aAAA,GAAA7B,MAAM,CAACkC,KAAK,cAAAL,aAAA,uBAAZA,aAAA,CAAcM,MAAM,KAAI,CAAC,IAAI,CAAC;IAClD,CAAC;IAED,MAAMhB,QAAQ,GAAG1B,KAAK,CAAC2B,KAAK,GAAG3B,KAAK,CAAC2B,KAAK,CAAC,CAAC,GAAGE,MAAM,CAACC,MAAM,CAACD,MAAM,CAACI,MAAM,CAACJ,MAAM,CAACK,cAAc,CAAClC,KAAK,CAAC,CAAC,EAAEA,KAAK,CAAC;IAChH0B,QAAQ,CAACiB,eAAe,CAAC5C,QAAQ,EAAEsC,OAAO,CAAC;IAC3ClC,aAAa,CAACuB,QAAQ,CAAC;EACzB,CAAC;EAED,MAAMkB,UAAU,GAAIC,MAAc,IAAK;IACrCC,OAAO,CAACC,GAAG,CAAC,aAAa,CAAC;IAC1B;IACA,MAAMrB,QAAQ,GAAG1B,KAAK,CAAC2B,KAAK,GAAG3B,KAAK,CAAC2B,KAAK,CAAC,CAAC,GAAGE,MAAM,CAACC,MAAM,CAACD,MAAM,CAACI,MAAM,CAACJ,MAAM,CAACK,cAAc,CAAClC,KAAK,CAAC,CAAC,EAAEA,KAAK,CAAC;IAChH,IAAI0B,QAAQ,CAACsB,kBAAkB,EAAE;MAC7BtB,QAAQ,CAACsB,kBAAkB,CAACjD,QAAQ,EAAE8C,MAAM,CAAC;MAC7C1C,aAAa,CAACuB,QAAQ,CAAC;IAC3B;EACF,CAAC;EAED,MAAMuB,eAAe,GAAGA,CAACJ,MAAc,EAAEK,QAAgB,KAAK;IAC5DnB,YAAY,CAACoB,CAAC,IAAI;MAAA,IAAAC,QAAA;MACd,MAAMC,CAAC,IAAAD,QAAA,GAAGD,CAAC,CAACV,KAAK,cAAAW,QAAA,uBAAPA,QAAA,CAASE,IAAI,CAACD,CAAC,IAAIA,CAAC,CAACf,EAAE,KAAKO,MAAM,CAAC;MAC7C,IAAIQ,CAAC,EAAEA,CAAC,CAAC3C,KAAK,GAAGwC,QAAQ;IAC7B,CAAC,CAAC;EACJ,CAAC;EAED,oBACEvD,OAAA;IACEiB,GAAG,EAAEA,GAAI;IACT2C,KAAK,EAAE;MACLtD,QAAQ,EAAE,OAAO;MACjBuD,IAAI,EAAEC,IAAI,CAACC,GAAG,CAACzD,QAAQ,CAAC0D,CAAC,EAAEC,MAAM,CAACC,UAAU,GAAG,GAAG,CAAC;MAAE;MACrDC,GAAG,EAAEL,IAAI,CAACC,GAAG,CAACzD,QAAQ,CAAC8D,CAAC,EAAEH,MAAM,CAACI,WAAW,GAAG,GAAG,CAAC;MAAE;MACrDC,KAAK,EAAE,OAAO;MACdC,eAAe,EAAE,OAAO;MACxBC,SAAS,EAAE,wDAAwD;MACnEC,YAAY,EAAE,KAAK;MACnBC,MAAM,EAAE,IAAI;MACZC,OAAO,EAAE,MAAM;MACfC,aAAa,EAAE,QAAQ;MACvBC,UAAU,EAAE,kDAAkD;MAC9DC,QAAQ,EAAE,QAAQ;MAClBC,MAAM,EAAE,mBAAmB;MAC3BC,SAAS,EAAE;IACb,CAAE;IACFC,WAAW,EAAGzB,CAAC,IAAKA,CAAC,CAAC0B,eAAe,CAAC,CAAE;IACxCC,SAAS,EAAG3B,CAAC,IAAKA,CAAC,CAAC0B,eAAe,CAAC,CAAE;IACtCE,OAAO,EAAG5B,CAAC,IAAKA,CAAC,CAAC0B,eAAe,CAAC,CAAE;IACpCG,aAAa,EAAG7B,CAAC,IAAKA,CAAC,CAAC0B,eAAe,CAAC,CAAE;IAAAI,QAAA,gBAG1CtF,OAAA;MAAK4D,KAAK,EAAE;QAAE2B,OAAO,EAAE,oBAAoB;QAAEC,UAAU,EAAE,SAAS;QAAEC,YAAY,EAAE;MAAiB,CAAE;MAAAH,QAAA,eACnGtF,OAAA;QACE0F,KAAK,EAAE3E,KAAM;QACb4E,QAAQ,EAAGnC,CAAC,IAAK;UACfxC,QAAQ,CAACwC,CAAC,CAAClC,MAAM,CAACoE,KAAK,CAAC;UACxB;UACAtD,YAAY,CAACwD,GAAG,IAAIA,GAAG,CAAC7E,KAAK,GAAGyC,CAAC,CAAClC,MAAM,CAACoE,KAAK,CAAC;QACjD,CAAE;QACFG,WAAW,EAAC,WAAW;QACvBjC,KAAK,EAAE;UACLe,OAAO,EAAE,OAAO;UAAEL,KAAK,EAAE,MAAM;UAAES,MAAM,EAAE,MAAM;UAAES,UAAU,EAAE,aAAa;UAC1EM,UAAU,EAAE,GAAG;UAAEC,QAAQ,EAAE,MAAM;UAAEC,OAAO,EAAE,MAAM;UAAEC,SAAS,EAAE,KAAK;UAAEC,KAAK,EAAE;QAC/E;MAAE;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CAAC,eAENtG,OAAA;MAAK4D,KAAK,EAAE;QAAE2B,OAAO,EAAE,GAAG;QAAEgB,SAAS,EAAE,OAAO;QAAEC,SAAS,EAAE;MAAO,CAAE;MAAAlB,QAAA,EAGjE7E,WAAW,iBACZT,OAAA,CAAAE,SAAA;QAAAoF,QAAA,gBACAtF,OAAA;UAAK4D,KAAK,EAAE;YACR2B,OAAO,EAAE,oBAAoB;YAC7BZ,OAAO,EAAC,MAAM;YAAE8B,cAAc,EAAC,eAAe;YAAEC,UAAU,EAAC;UAC/D,CAAE;UAAApB,QAAA,eACEtF,OAAA;YAAM4D,KAAK,EAAE;cAACmC,QAAQ,EAAE,MAAM;cAAED,UAAU,EAAE,GAAG;cAAEI,KAAK,EAAE;YAAS,CAAE;YAAAZ,QAAA,EAAC;UAAK;YAAAa,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/E,CAAC,eAGNtG,OAAA;UAAO4D,KAAK,EAAE;YAAEU,KAAK,EAAE,MAAM;YAAEqC,cAAc,EAAE;UAAW,CAAE;UAAArB,QAAA,eAC1DtF,OAAA;YAAAsF,QAAA,GACG,CAAC1E,MAAM,CAACkC,KAAK,IAAI,EAAE,EAAE8D,GAAG,CAAEC,IAAI,iBAC7B7G,OAAA;cAAkB4D,KAAK,EAAE;gBAAE6B,YAAY,EAAE;cAAoB,CAAE;cAAAH,QAAA,gBAC7DtF,OAAA;gBAAI4D,KAAK,EAAE;kBAAE2B,OAAO,EAAE;gBAAW,CAAE;gBAAAD,QAAA,eACjCtF,OAAA;kBACE0F,KAAK,EAAEmB,IAAI,CAAC9F,KAAM;kBAClB4E,QAAQ,EAAGnC,CAAC,IAAKF,eAAe,CAACuD,IAAI,CAAClE,EAAE,EAAEa,CAAC,CAAClC,MAAM,CAACoE,KAAK,CAAE;kBAC1D9B,KAAK,EAAE;oBACHU,KAAK,EAAE,MAAM;oBAAEiB,OAAO,EAAE,OAAO;oBAAER,MAAM,EAAE,MAAM;oBAC/CgB,QAAQ,EAAE,MAAM;oBAAEG,KAAK,EAAE,SAAS;oBAAEF,OAAO,EAAE,MAAM;oBACnDR,UAAU,EAAE;kBAChB,CAAE;kBACFK,WAAW,EAAC;gBAAW;kBAAAM,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACxB;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACA,CAAC,eACLtG,OAAA;gBAAI4D,KAAK,EAAE;kBAAEkD,SAAS,EAAE,OAAO;kBAAEC,YAAY,EAAE,MAAM;kBAAEzC,KAAK,EAAE;gBAAO,CAAE;gBAAAgB,QAAA,eACrEtF,OAAA;kBACEoF,OAAO,EAAEA,CAAA,KAAMnC,UAAU,CAAC4D,IAAI,CAAClE,EAAE,CAAE;kBACnCqE,KAAK,EAAC,aAAa;kBACnBpD,KAAK,EAAE;oBACHsC,KAAK,EAAE,SAAS;oBAAEnB,MAAM,EAAE,MAAM;oBAAES,UAAU,EAAE,MAAM;oBACpDyB,MAAM,EAAE,SAAS;oBAAElB,QAAQ,EAAE,MAAM;oBAAER,OAAO,EAAE,SAAS;oBAAEd,YAAY,EAAE;kBAC3E,CAAE;kBACFyC,WAAW,EAAG1D,CAAC,IAAK;oBAACA,CAAC,CAAC2D,aAAa,CAACvD,KAAK,CAACW,eAAe,GAAG,SAAS;oBAAEf,CAAC,CAAC2D,aAAa,CAACvD,KAAK,CAACsC,KAAK,GAAG,SAAS;kBAAA,CAAE;kBACjHkB,UAAU,EAAG5D,CAAC,IAAK;oBAACA,CAAC,CAAC2D,aAAa,CAACvD,KAAK,CAACW,eAAe,GAAG,aAAa;oBAAEf,CAAC,CAAC2D,aAAa,CAACvD,KAAK,CAACsC,KAAK,GAAG,SAAS;kBAAA,CAAE;kBAAAZ,QAAA,EACrH;gBAED;kBAAAa,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAQ;cAAC;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACP,CAAC;YAAA,GA1BEO,IAAI,CAAClE,EAAE;cAAAwD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OA2BZ,CACL,CAAC,eAGFtG,OAAA;cACIoF,OAAO,EAAE5C,OAAQ;cACjBoB,KAAK,EAAE;gBAAEqD,MAAM,EAAE;cAAU,CAAE;cAC7BC,WAAW,EAAG1D,CAAC,IAAKA,CAAC,CAAC2D,aAAa,CAACvD,KAAK,CAACW,eAAe,GAAG,SAAU;cACtE6C,UAAU,EAAG5D,CAAC,IAAKA,CAAC,CAAC2D,aAAa,CAACvD,KAAK,CAACW,eAAe,GAAG,aAAc;cAAAe,QAAA,eAEzEtF,OAAA;gBAAIqH,OAAO,EAAE,CAAE;gBAACzD,KAAK,EAAE;kBAAE2B,OAAO,EAAE,WAAW;kBAAEW,KAAK,EAAE,SAAS;kBAAEH,QAAQ,EAAE,MAAM;kBAAED,UAAU,EAAE;gBAAI,CAAE;gBAAAR,QAAA,EAAC;cAEtG;gBAAAa,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAI;YAAC;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACL,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACA;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC;MAAA,eACR;IACD;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACI,CAAC,eAGNtG,OAAA;MAAK4D,KAAK,EAAE;QAAC2B,OAAO,EAAE,WAAW;QAAEC,UAAU,EAAE,MAAM;QAAE8B,SAAS,EAAE,mBAAmB;QAAER,SAAS,EAAE;MAAO,CAAE;MAAAxB,QAAA,eACvGtF,OAAA;QACEoF,OAAO,EAAE7E,OAAQ;QACjBqD,KAAK,EAAE;UACH2B,OAAO,EAAE,UAAU;UAAEd,YAAY,EAAE,KAAK;UAAEM,MAAM,EAAE,MAAM;UACxDS,UAAU,EAAE,SAAS;UAAEU,KAAK,EAAE,OAAO;UAAEJ,UAAU,EAAE,GAAG;UAAEmB,MAAM,EAAE,SAAS;UAAElB,QAAQ,EAAE;QACzF,CAAE;QAAAT,QAAA,EACH;MAED;QAAAa,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACR,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV,CAAC;AAAC3F,EAAA,CA5MWR,YAAyC;AAAAoH,EAAA,GAAzCpH,YAAyC;AAAA,IAAAoH,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}