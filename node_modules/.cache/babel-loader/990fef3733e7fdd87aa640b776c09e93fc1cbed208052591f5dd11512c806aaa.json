{"ast":null,"code":"var _jsxFileName = \"/home/belac/sysFlow/src/components/GraphContextMenu.tsx\";\nimport React from \"react\";\n// Adjust this import path if needed\nimport { ContextMenu } from \"./ContextMenu\";\n\n// 1. Relaxed Interface to match your Parent Component\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const GraphContextMenu = ({\n  canvasMenu,\n  graph,\n  onGraphChange,\n  onClose\n}) => {\n  if (!canvasMenu) return null;\n  const getOptions = () => {\n    // 1. CANVAS (Background)\n    if (!canvasMenu.targetId) {\n      return [{\n        label: \"Add Node\",\n        onClick: () => {\n          const newGraph = graph.clone();\n          const id = `n_${crypto.randomUUID().slice(0, 4)}`;\n          newGraph.addNode({\n            id,\n            label: \"New Node\",\n            position: canvasMenu.position,\n            ports: [],\n            size: {\n              width: 100,\n              height: 50\n            }\n          });\n          onGraphChange(newGraph);\n          onClose();\n        }\n      }, {\n        label: \"Add Container\",\n        onClick: () => {\n          const newGraph = graph.clone();\n          const id = `c_${crypto.randomUUID().slice(0, 4)}`;\n          newGraph.addContainer({\n            id,\n            label: \"New Container\",\n            position: canvasMenu.position,\n            size: {\n              width: 300,\n              height: 200\n            },\n            nodeIds: [],\n            childContainerIds: [],\n            collapsed: false\n          });\n          onGraphChange(newGraph);\n          onClose();\n        }\n      }];\n    }\n\n    // 2. NODE Actions\n    if (canvasMenu.type === \"node\") {\n      return [{\n        label: \"Rename\",\n        onClick: () => {\n          // FIX: Ensure undefined becomes null\n          onStartRename(canvasMenu.targetId || null, canvasMenu.position);\n          onClose();\n        }\n      }, {\n        label: \"Delete Node\",\n        onClick: () => {\n          if (canvasMenu.targetId) {\n            const newGraph = graph.clone();\n            newGraph.removeNode(canvasMenu.targetId);\n            onGraphChange(newGraph);\n          }\n          onClose();\n        }\n      }];\n    }\n\n    // 3. CONTAINER Actions\n    if (canvasMenu.type === \"container\") {\n      return [{\n        label: \"Rename\",\n        onClick: () => {\n          // FIX: Ensure undefined becomes null\n          onStartRename(canvasMenu.targetId || null, canvasMenu.position);\n          onClose();\n        }\n      }, {\n        label: \"Toggle Collapse\",\n        onClick: () => {\n          if (canvasMenu.targetId) {\n            onToggleContainer(canvasMenu.targetId);\n          }\n          onClose();\n        }\n      }, {\n        label: \"Delete Container\",\n        onClick: () => {\n          if (canvasMenu.targetId) {\n            const newGraph = graph.clone();\n            newGraph.removeContainer(canvasMenu.targetId);\n            onGraphChange(newGraph);\n          }\n          onClose();\n        }\n      }];\n    }\n    return [];\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"fixed\",\n        top: 0,\n        left: 0,\n        width: \"100vw\",\n        height: \"100vh\",\n        zIndex: 9998\n      },\n      onMouseDown: e => {\n        e.stopPropagation();\n        onClose();\n      },\n      onContextMenu: e => {\n        e.preventDefault();\n        e.stopPropagation();\n        onClose();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: \"absolute\",\n        top: canvasMenu.position.y,\n        left: canvasMenu.position.x,\n        zIndex: 9999\n      },\n      children: /*#__PURE__*/_jsxDEV(ContextMenu, {\n        position: canvasMenu.position,\n        options: getOptions()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_c = GraphContextMenu;\nvar _c;\n$RefreshReg$(_c, \"GraphContextMenu\");","map":{"version":3,"names":["React","ContextMenu","jsxDEV","_jsxDEV","Fragment","_Fragment","GraphContextMenu","canvasMenu","graph","onGraphChange","onClose","getOptions","targetId","label","onClick","newGraph","clone","id","crypto","randomUUID","slice","addNode","position","ports","size","width","height","addContainer","nodeIds","childContainerIds","collapsed","type","onStartRename","removeNode","onToggleContainer","removeContainer","children","style","top","left","zIndex","onMouseDown","e","stopPropagation","onContextMenu","preventDefault","fileName","_jsxFileName","lineNumber","columnNumber","y","x","options","_c","$RefreshReg$"],"sources":["/home/belac/sysFlow/src/components/GraphContextMenu.tsx"],"sourcesContent":["import React from \"react\";\n// Adjust this import path if needed\nimport { ContextMenu } from \"./ContextMenu\"; \n\n// 1. Relaxed Interface to match your Parent Component\nexport interface CanvasMenuState {\n  targetId?: string | null; // Allows string, null, or undefined\n  type?: string;            // Allows any string (fixes the \"canvas\" | \"node\" mismatch)\n  position: { x: number; y: number };\n}\n\ninterface GraphContextMenuProps {\n  canvasMenu: CanvasMenuState | null;\n  graph: any; \n  onGraphChange: (newGraph: any) => void;\n  onClose: () => void;\n}\n\nexport const GraphContextMenu: React.FC<GraphContextMenuProps> = ({\n  canvasMenu,\n  graph,\n  onGraphChange,\n  onClose,\n}) => {\n  if (!canvasMenu) return null;\n\n  const getOptions = () => {\n    // 1. CANVAS (Background)\n    if (!canvasMenu.targetId) {\n      return [\n        {\n          label: \"Add Node\",\n          onClick: () => {\n            const newGraph = graph.clone();\n            const id = `n_${crypto.randomUUID().slice(0, 4)}`;\n            newGraph.addNode({\n              id,\n              label: \"New Node\",\n              position: canvasMenu.position,\n              ports: [],\n              size: { width: 100, height: 50 },\n            });\n            onGraphChange(newGraph);\n            onClose();\n          },\n        },\n        {\n          label: \"Add Container\",\n          onClick: () => {\n            const newGraph = graph.clone();\n            const id = `c_${crypto.randomUUID().slice(0, 4)}`;\n            newGraph.addContainer({\n              id,\n              label: \"New Container\",\n              position: canvasMenu.position,\n              size: { width: 300, height: 200 },\n              nodeIds: [],\n              childContainerIds: [],\n              collapsed: false,\n            });\n            onGraphChange(newGraph);\n            onClose();\n          },\n        },\n      ];\n    }\n\n    // 2. NODE Actions\n    if (canvasMenu.type === \"node\") {\n      return [\n        {\n          label: \"Rename\",\n          onClick: () => {\n            // FIX: Ensure undefined becomes null\n            onStartRename(canvasMenu.targetId || null, canvasMenu.position);\n            onClose();\n          },\n        },\n        {\n          label: \"Delete Node\",\n          onClick: () => {\n            if (canvasMenu.targetId) {\n              const newGraph = graph.clone();\n              newGraph.removeNode(canvasMenu.targetId);\n              onGraphChange(newGraph);\n            }\n            onClose();\n          },\n        },\n      ];\n    }\n\n    // 3. CONTAINER Actions\n    if (canvasMenu.type === \"container\") {\n      return [\n        {\n          label: \"Rename\",\n          onClick: () => {\n            // FIX: Ensure undefined becomes null\n            onStartRename(canvasMenu.targetId || null, canvasMenu.position);\n            onClose();\n          },\n        },\n        {\n          label: \"Toggle Collapse\",\n          onClick: () => {\n            if (canvasMenu.targetId) {\n              onToggleContainer(canvasMenu.targetId);\n            }\n            onClose();\n          },\n        },\n        {\n          label: \"Delete Container\",\n          onClick: () => {\n            if (canvasMenu.targetId) {\n              const newGraph = graph.clone();\n              newGraph.removeContainer(canvasMenu.targetId);\n              onGraphChange(newGraph);\n            }\n            onClose();\n          },\n        },\n      ];\n    }\n\n    return [];\n  };\n\n  return (\n    <>\n      <div\n        style={{\n          position: \"fixed\",\n          top: 0,\n          left: 0,\n          width: \"100vw\",\n          height: \"100vh\",\n          zIndex: 9998,\n        }}\n        onMouseDown={(e) => {\n           e.stopPropagation();\n           onClose();\n        }}\n        onContextMenu={(e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          onClose();\n        }}\n      />\n\n      <div\n        style={{\n          position: \"absolute\",\n          top: canvasMenu.position.y,\n          left: canvasMenu.position.x,\n          zIndex: 9999,\n        }}\n      >\n        <ContextMenu position={canvasMenu.position} options={getOptions()} />\n      </div>\n    </>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}